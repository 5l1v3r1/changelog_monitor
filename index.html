<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <div id="Loading" style="display: none;"><p>Loading...</p></div>
    <div id="errorMessage" style="display: none; color: red;"></div>
    <div id="Data" style="display: none;">
        <table>
            <thead>
                <td>#</td>
                <td>Repo Name</td>
                <td>Open Issues</td>
                <td>Repo Link</td>
            </thead>
            <tbody id="dataTableBody">

            </tbody>
        </table>
    </div>
    <script
        src="https://code.jquery.com/jquery-3.4.1.min.js"
        integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
        crossorigin="anonymous">
    </script>
    <script>
        $(document).ready(()=>{
            var user = 'coronasafe'
            $.ajax({
                url: `https://api.github.com/users/${user}/repos?per_page=100`,
                method: "get",
                beforeSend: () => {
                    $('#Loading').show()
                    $('#Data').hide()
                    $('#errorMessage').hide()
                },
                success: function( result ) {
                    $('#Loading').hide()
                    $('#errorMessage').hide()
                    console.log("success");
                    console.log(result[0].html_url);
                    $('#Data').show()
                    var op = ""
                    result.forEach((element, index) => {
                        op += `<tr><td>${index+1}</td>`;
                        op += `<td><a href='repo.html?name=${element.name}'>${element.name}</a></td>`;
                        op += `<td>${element.open_issues_count}</td>`;
                        op += `<td><a href='${element.html_url}' target='_blank'>${element.html_url}</a></td></tr>`;
                    });
                    $('#dataTableBody').html(op)
                },
                error: function(err){
                    $('#Loading').hide()
                    $('#Data').hide()
                    $('#errorMessage').html('<p>Error in query</p>');
                    $('#errorMessage').show()
                    console.log("error");
                }
            });
        })
    </script>
</body>
</html>